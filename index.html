<!DOCTYPE html>		
<html>
    <head>
		<meta charset="utf-8" />
		<!--Let browser know website is optimized for mobile-->
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
		
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
		<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
	    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

		<!-- Import Angular Library -->
		<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.6.6/angular-sanitize.js"></script>
           
        <!-- Custom Files -->
		<link rel="stylesheet" type="text/css" href="css/features.css" />
	    <link rel="stylesheet" type="text/css" href="css/angular-auto-complete.css">
		<link rel="stylesheet" type="text/css" href="css/ng-prettyjson.min.css">
		<script type="text/javascript" src="js/main.js"></script>
		<script type="text/javascript" src="js/ng-prettyjson.min.js"></script>
		<script type="text/javascript" src="js/angular-auto-complete.js"></script>

		<title>PostMaster</title>
	</head>

	<body ng-app="myApp">
	   <!-- Top Section -->
	<div ng-controller="index">
	    <div class="top_parent" >
		   <div class="w3-sidebar w3-bar-block w3-light-grey w3-card" style="width:12%; background-color:white!important;">
			  <h5 class="w3-bar-item"><b>POSTMASTER</b></h5>
			  <button class="w3-bar-item w3-button w3-orange tablink" onclick="openCity(event, 'login')">Login</button>
			  <button class="w3-bar-item w3-button tablink" onclick="openCity(event, 'headers')">Headers</button>
			  <button class="w3-bar-item w3-button tablink" onclick="openCity(event, 'testall')">Test All</button>
		   </div>
	       <div class="jumbotron top_section"> 
		       <div id="login" class="top_tab"  >
		          <form name="logn">
			          <div class="login_form">
			             <div class="row">
			               <div class="col-sm-10 col-md-10 col-lg-10" style="padding-right: 0px! important ">
			                 <div class="field url_input">
				                 <input type="text" data-attr="{{input.dsn}}" ng-model='input.dsn' class="floatinput w3-input w3-border input_gen" ng-readonly="read_only" auto-complete="autoCompleteEnv">
 						      	 <label class="floatlabel">Dsn</label>
						     </div>   
					       </div>  
					       <div class="col-sm-2 col-md-2 col-lg-2">
					         <a href=""><i class="fa fa-exclamation-circle fa-2x the_i"  ng-click="loadconfig(input.url)" aria-hidden="true"></i></a>
					       </div>  
					     </div>   
					     <div class="field name_input" style="float: left;">
					         <input type="text" data-attr="{{input.name}}" ng-model="input.name" id="name" class="floatinput w3-input w3-border input_gen" ng-readonly="read_only">
			                 <label class="floatlabel" name="name">Name</label>
					     </div>
					     <div class="field pass_input" style="display: inline-block;"">    
					         <input type="text" data-attr="{{input.password}}" ng-model="input.password"  id="password" class="floatinput w3-input w3-border input_gen" ng-readonly="read_only">
			                 <label class="floatlabel" for="password">Password</label>
					     </div>   
					     <div class="field">
					         <input type="text" data-attr="{{input.oauthurl}}" ng-model="input.oauthurl" id="oauthurl" class="floatinput w3-input w3-border input_gen"  ng-readonly="read_only">
 			                 <label class="floatlabel" for="oauthurl">Oauth Url</label>
					     </div>    
				      </div>
				      <div class="tm_input">
				      	<div class="field">
					      	<input data-attr="{{input.url}}" type="text" ng-model="input.url" id="url" placehoplder="" class="floatinput w3-input w3-border input_gen" ng-readonly="read_only">
			                 <label class="floatlabel" for="url">URL</label>
					    </div> 
				        <div class="field">
					      	<input type="text" data-attr="{{input.uid}}" ng-model='input.uid'  class="floatinput w3-input w3-border input_gen" ng-readonly="read_only">
					      	<label class="floatlabel">Uid</label>
					    </div>  	 	
                        <div class="field">
					      	<input type="text" data-attr="{{input.sitename}}" ng-model='input.sitename' class="floatinput w3-input w3-border input_gen" ng-readonly="read_only">
					      	<label class="floatlabel">SiteName</label>
					    </div>  	
				      </div>
				      <div class="login_submit">
				        <div style="float: right;">
					        <div class="row login_data">
						        <span ng-if="dlogin_error" style="color: red;">Drupal Login Failed</span> 
						        <span class="input_gen" >{{ acct_id }}</span>
						    </div>
						    <div class="row login_data">
							    <span ng-if="tlogin_error" style="color: red;">TM Login Failed</span> 
						        <span class="input_gen" >{{ member_id }}</span> 
						    </div>   
						    <div class="row login_data">

					      	  <input align="right" type="submit" ng-disabled="((!input.url) || (!input.name) || (!input.password) || lbtn)" ng-click="login(
					      	  input)" value="{{login_button}}" class="w3-button w3-green input_gen">
					      	</div>  
					    </div>  	
				      </div>
			      </form> 
		       </div> 
		       <div id="headers" class="top_tab"  style="display:none">
		           <div class="row">
		              <div class="col-sm-3 col-md-3 col-lg-3 header_rows">
		                <div class="field">
			              	<input type="text" ng-model='input.tmapiurl' data-attr="{{input.tmapiurl}}" class="floatinput w3-input w3-border input_gen" ng-readonly="read_only"> 	
				            <label class="floatlabel">TM API Url</label>
					    </div>    	
					    <div class="field">
					      	<input type="text" ng-model='input.clientid' data-attr="{{input.clientid}}" class="floatinput  w3-input w3-border input_gen" ng-readonly="read_only">
					      	<label class="floatlabel">Client Id</label>
                        </div>
                        <div class="field">
					      	<input type="text" ng-model='input.clientsecret' data-attr="{{input.clientsecret}}" class="floatinput w3-input w3-border input_gen" ng-readonly="read_only">
					      	<label class="floatlabel"> Client Secret</label>
					    </div>  	
				      </div>
				      <div class="col-sm-3 col-md-3 col-lg-3 header_rows">
				        <div class="field">
					      	<input type="text" ng-model='input.xapikey' data-attr="{{input.xapikey}}" class="floatinput w3-input w3-border input_gen" ng-readonly="read_only">
					      	<label class="floatlabel">X-API Key</label>
					    </div>  	
					    <div class="field input_gen_half half1" style="float: left;">
					      	<input type="text" ng-model='input.xosname' data-attr="{{input.xosname}}" class="floatinput w3-input w3-border input_gen" ng-readonly="read_only">
					      	<label class="floatlabel">X-OS Name</label>
					    </div>  	
					    <div class="field input_gen_half" style="display: inline-block;">
					      	<input type="text" ng-model='input.xosversion' data-attr="{{input.xosversion}}" class="floatinput w3-input w3-border input_gen" ng-readonly="read_only">
					      	<label class="floatlabel">X-OS Ver</label>
				      	</div>
				      	<div class="field">
					      	<input type="text" ng-model='input.xclient' data-attr="{{input.xclient}}" class="floatinput w3-input w3-border input_gen" ng-readonly="read_only">
					      	<label class="floatlabel">X-Client</label>
					    </div>  	
				      </div>
				      <div class="col-sm-3 col-md-3 col-lg-3 header_rows">
				        <div class="field"> 
					       	<input type="text" ng-model='input.accept' data-attr="{{input.accept}}" class="floatinput w3-input w3-border input_gen" ng-readonly="read_only">
					       	<label class="floatlabel">Accept</label>
					    </div>   	
					    <div class="field input_gen_half half1" style="float: left;">
					      	<input type="text" ng-model='input.contenttype' data-attr="{{input.contenttype}}" class="floatinput w3-input w3-border input_gen" ng-readonly="read_only">
					      	<label class="floatlabel">Content-Type</label>
					    </div>  	
					    <div class="field input_gen_half" style="display: inline-block;">
					      	<input type="text" ng-model='input.acceptlanguage' data-attr="{{input.acceptlanguage}}" class="floatinput w3-input w3-border input_gen" ng-readonly="read_only">
					      	<label class="floatlabel">Accept Lang</label>
					    </div>  	
				      </div>	
                   </div> 				      	
		       </div>
		       <div id="testall" class="top_tab" style="display:none">
		       	  <!-- <div class="row">
		              <div class="col-sm-3 col-md-3 col-lg-3 dall_btn">
			              <button class="w3-button w3-teal" ng-click="dpAll()" ng-disabled="disab_allbtn">Test Drupal</button>
			              <div class="all_load_parent"><i class="fa fa-circle-o-notch fa-spin all_load" ng-show="disp_dpallload"></i></div>
			          </div>   
			       </div>   --> 

		          <div class="row">
			          <div class="col-sm-3 col-md-3 col-lg-3 tall_btn">
			              <button class="w3-button w3-teal" ng-click="tmAll()" ng-disabled="disab_allbtn">Test TM</button>
			              <div class="all_load_parent"><i class="fa fa-circle-o-notch fa-spin all_load" ng-show="disp_tmallload"></i></div>
		              </div>
		          </div>    
		       </div>
	       </div>
	   <div class="loading_image" ng-show="imLoading"><i class="fa fa-spinner fa-pulse fa-3x fa-fw golu_loader"></i></div>          
       </div>

       <!-- Output Section -->
       <div ng-controller="drupal" class="bottom_section ng-cloak">
         <div class="left">
            <div class="frozen_parent">
             <div>
                <div class="service_parent">
		           <div class="dropdown">
					    <button class="w3-button w3-white dropdown-toggle"  data-toggle="dropdown" ng-disabled="disab_dserv">Drupal Services
					    <span class="caret"></span></button>
					    <ul class="dropdown-menu service_list_ul list-group table-striped">
					      <li class="service_list_li">
					          <div class="input-group" style="width: 100%;"> 
							     <input type="text" placeholder="Search" ng-model='drupal_filter.Name' class="form-control service_search">
							  </div>   
					      </li>
					      <li class="divider"></li>
					      <li class= "service_list_li" ng-repeat="d in drupal_services | filter:drupal_filter"  ng-click="hitDrupal(d.Name,d.endpoint,d.api)"><a href="#" class="list-group-item"><strong>{{ d.Name }}</strong></a></li>
					    </ul>
				   </div>
				   <div class="dynamic_fields" align="right">
				     <form name="dynamic_fields" ng-submit="goDynamic(drupDynam.one, drupDynam.two)">
					   	 <input type="text" ng-model="drupDynam.one" placeholder="{{placeholder1}}" ng-if="drupal_dynamic1" class="w3-input w3-border drupal_dynamic1" auto-complete="autoCompleteOptions" />
					   	 <input type="text" ng-model="drupDynam.two" placeholder="{{placeholder2}}" ng-if="drupal_dynamic2" class="w3-input w3-border drupal_dynamic2" auto-complete="autoCompleteOptions2">
					   	 <input type="submit" ng-disabled="((!drupDynam.one) || disab_dserv)" class="w3-button w3-orange drupal_ynamic_go" value="Go!" ng-show="(drupal_dynamic1 || drup_postrequest_disp)">
				   	 </form>
				   </div>
		        </div>
		       <div ng-show="drupal_progress" class="progress-line"></div>
		     </div> 
		     <div class="panel-group" id="accordion">
 			    <div class="panel panel-default">
 			      <div class="panel-heading" style="color:#8B008B;" ng-show="drupal_requrl">
 			          <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">{{drupal_requrl}}</a>
 			      </div>
 			      <div id="collapse1" class="panel-collapse collapse">
 			        <div class="panel-body"><p json='drupal_reqhead' pretty-json></p></div>
 			      </div>
 			    </div>
 			  </div>
		    </div>
		      <div class="postrequest_parent" ng-if="drup_postrequest_disp">
			      <textarea class="postrequest" ng-model="$parent.drup_postrequest"></textarea> 
		      </div>
			   <div class="service_data">
		          <p json='drupal_output' pretty-json ></p>
		       </div> 
	     </div>  
	     <div class="right">
	         <div class="frozen_parent">
	          <div>
		          <div class="service_parent">
			           <div class="dropdown">
						    <button class="w3-button w3-white dropdown-toggle"  data-toggle="dropdown"  ng-disabled="disab_tserv">Tm Services
						    <span class="caret"></span></button>
						    <ul class="dropdown-menu service_list_ul list-group">
						      <li class="service_list_li">
							      <div class="input-group" style="width: 100%;"> 
								     <input type="text" placeholder="Search" ng-model='tm_filter.Name' class="form-control service_search">
								  </div>   
						      </li>
						      <li class="divider"></li>
						      <li class= "service_list_li" ng-repeat = "t in tm_services | filter:tm_filter"  ng-click="hitTm(t.endpoint,t.api)"><a href="#" class="list-group-item"><strong>{{ t.Name }}</strong></a></li>
						    </ul>
					   </div>
					   <div class="dynamic_fields" align="right">
				         <form name="dynamic_fields_tm" ng-disabled="disab_tserv">
						   	 <input type="text" ng-model="tmDynam.one" placeholder="{{tmplaceholder1}}" ng-if="tm_dynamic1" class="w3-input w3-border tm_dynamic1" auto-complete="tmautoCompleteOptions" />
						   	 <input type="text" ng-model="tmDynam.two" placeholder="{{tmplaceholder2}}" ng-if="tm_dynamic2" class="w3-input w3-border tm_dynamic2" auto-complete="tmautoCompleteOptions2">
						   	 <input type="submit" ng-disabled="((!tmDynam.one) || disab_tserv)" class="w3-button w3-orange drupal_ynamic_go" value="Go!" ng-show="(tm_dynamic1 || postrequest_disp)" ng-click="goDynamicTm()">
				   	     </form>
				       </div>
					</div>
			        <div ng-show="tm_progress" class="progress-line"></div>
		       </div>
		       <div class="panel-group" id="accordion">
 			    <div class="panel panel-default">
 			      <div class="panel-heading" style="color:#8B008B;" ng-show="drupal_requrl">
 			          <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">{{tm_requrl}}</a>
 			      </div>
 			      <div id="collapse1" class="panel-collapse collapse">
 			        <div class="panel-body"><p json='tm_reqhead' pretty-json></p></div>
 			      </div>
 			    </div>
 			  </div>
		      </div>
		      <div class="postrequest_parent" ng-if="postrequest_disp">
			      <textarea class="postrequest" ng-model="$parent.postrequest"></textarea> 
		      </div>
	          <div class="service_data">
	            <p json='tm_output' pretty-json ></p>
	          </div> 
	      </div>  

	   </div>
    
    </div>
    <script>
		function openCity(evt, cityName) {
		  var i, x, tablinks;
		  x = document.getElementsByClassName("top_tab");
		  for (i = 0; i < x.length; i++) {
		     x[i].style.display = "none";
		  }
		  tablinks = document.getElementsByClassName("tablink");
		  for (i = 0; i < x.length; i++) {
		      tablinks[i].className = tablinks[i].className.replace(" w3-orange", ""); 
		  }
		  document.getElementById(cityName).style.display = "block";
		  evt.currentTarget.className += " w3-orange";
		}
    </script>
    </body>

</html>